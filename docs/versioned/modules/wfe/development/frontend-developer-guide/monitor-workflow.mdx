---
sidebar_position: 4
---
# Monitor Workflow

When the workflow is running, it will generate events in the database. These events can be used to monitor the 
state of the workflow.

## Workflow Events

Belows are the events that will be generated by the workflow with their description.

<table>
<tr><th>Event</th><th>Description</th><th>Attributes</th></tr>
<tr><td>WorkflowExecutionStarted</td><td>always the first event in a workflow execution event history</td><td>input</td></tr>
<tr><td>WorkflowExecutionCompleted</td><td>indicates that the workflow execution has successfully completed</td><td>result</td></tr>
<tr><td>WorkflowExecutionFailed</td><td>indicates that the workflow execution has unsuccessfully completed with error</td><td>failure</td></tr>
<tr><td>WorkflowExecutionCanceled</td><td>indicates that the workflow execution has been canceled</td><td>details</td></tr>
<tr><td>WorkflowExecutionTerminated</td><td>indicates that the workflow execution has been terminated</td><td>reason</td></tr>
<tr><td>ActivityTaskScheduled</td><td>indicates that the activity task has been scheduled</td><td>input</td></tr>
<tr><td>ActivityTaskStarted</td><td>indicates that the activity task has started</td><td>last_failure</td></tr>
<tr><td>ActivityTaskCompleted</td><td>indicates that the activity task has completed</td><td>result</td></tr>
<tr><td>ActivityTaskCancelRequested</td><td>indicates that a request has been made to cancel the activity task</td><td></td></tr>
<tr><td>ActivityTaskCanceled</td><td>indicates that the activity task has been canceled</td><td></td></tr>
<tr><td>ActivityTaskFailed</td><td>indicates that the activity task has failed</td><td>failure</td></tr>
<tr><td>FormTaskScheduled</td><td>indicates that the form task has been scheduled</td><td>input</td></tr>
<tr><td>FormTaskStarted</td><td>indicates that the form task has started</td><td>workflow_id, workflow_run_id</td></tr>
<tr><td>FormTaskCompleted</td><td>indicates that the form task has completed</td><td>result</td></tr>
<tr><td>FormTaskFailed</td><td>indicates that the form task has failed</td><td>failure</td></tr>
<tr><td>RecoverTaskScheduled</td><td>indicates that the recover task has been scheduled</td><td>input</td></tr>
<tr><td>RecoverTaskStarted</td><td>indicates that the recover task has started</td><td>workflow_id, workflow_run_id</td></tr>
<tr><td>RecoverTaskCompleted</td><td>indicates that the recover task has completed</td><td>result</td></tr>
<tr><td>RecoverTaskFailed</td><td>indicates that the recover task has failed</td><td>failure</td></tr>
<tr><td>CallActivityTaskScheduled</td><td>indicates that the callActivity task has been scheduled</td><td>input</td></tr>
<tr><td>CallActivityTaskStarted</td><td>indicates that the callActivity task has started</td><td>workflow_id, workflow_run_id</td></tr>
<tr><td>CallActivityTaskCompleted</td><td>indicates that the callActivity task has completed</td><td>result</td></tr>
<tr><td>CallActivityTaskFailed</td><td>indicates that the callActivity task has failed</td><td>failure</td></tr>
</table>

## Tracking Workflow Execution History

To track the workflow execution history, make a `GET` HTTP request to `{WFM_URL}/v1/workflow/{workflow_id}` 
which returns the history of the workflow execution states up to the current state.

<details>
<summary>Example API response</summary>

```json
{
    "data": [
        {
            "event_type": "WorkflowExecutionStarted",
            "timestamp": "2024-10-24T10:47:35.14814Z",
            "attributes": {
                "input": [
                    {
                        "States": []
                    }
                ]
            }
        },
        {
            "event_type": "ActivityTaskScheduled",
            "timestamp": "2024-10-24T10:47:35.160881Z",
            "task_name": "example",
            "task_type": "ExampleActivity",
            "attributes": {
                "input": [
                    "Hello" 
                ]
            }
        },
        {
            "event_type": "ActivityTaskStarted",
            "timestamp": "2024-10-24T10:47:35.165684Z",
            "task_name": "example",
            "task_type": "ExampleActivity"
        },
        {
            "event_type": "ActivityTaskCompleted",
            "timestamp": "2024-10-24T10:47:35.166853Z",
            "task_name": "example",
            "task_type": "ExampleActivity",
            "attributes": {
                "result": [
                    "Hello"
                ]
            }
        },
        {
            "event_type": "WorkflowExecutionCompleted",
            "timestamp": "2024-10-24T10:53:02.343729Z",
            "attributes": {
                "result": [
                    {
                        "example_input": "Hello",
                        "Result_example": "Hello"
                    }
                ]
            }
        }
    ],
    "sent_at": "2024-10-30T09:37:27Z",
    "page": {
        "number": 1,
        "size": 5,
        "total_records": 5,
        "count": 5,
        "sort": [
            ""
        ]
    }
}
```

</details>

The API is paginated, so you can get the history of the workflow execution states by specifying the page number and page
size as well as you can sort the timestamp in ascending or descending order.

For example, if you want to get the last event of the workflow execution history, you can specify the path parameter 
with `{WFM_URL}/v1/workflow/{workflow_id}?page=1&size=1&sort=timestamp,desc`.

<details>
<summary>Example API response</summary>

```json
{
    "data": [
        {
            "event_type": "WorkflowExecutionCompleted",
            "timestamp": "2024-10-24T10:53:02.343729Z",
            "attributes": {
                "result": [
                    {
                        "example_input": "Hello",
                        "Result_example": "Hello"
                    }
                ]
            }
        }
    ],
    "sent_at": "2024-10-30T09:37:27Z",
    "page": {
        "number": 1,
        "size": 1,
        "total_records": 5,
        "count": 1,
        "sort": [
            "timestamp desc"
        ]
    }
}
```

</details>

Based on the event type in the response, you can create the corresponding event handler user interface.

