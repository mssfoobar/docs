---
sidebar_position: 2
sidebar_label: Recording namespace
---

# Deploy Recording namespace

-   Navigate to manifest/recording folder
-   Fullfil and correct variables in `recording-configmap.yml` and `debezium-rtus-configmap.yml`

:::info
Configration: [Config](../configuration/recording.mdx)
:::

-   Create a recording configmap

```bash
kubectl apply -f recording-configmap.yml
```

-   Create a debezium-rtus-configmap

```bash
kubectl apply -f debezium-rtus-configmap.yml
```

-   Create a debezium for rtus deployment

```bash
kubectl apply -f debezium-rtus-deployment.yml
```

-   Create a recording deployment

```bash
kubectl apply -f recording-deployment.yml
```

-   Create a recording service (for scheudlejob configuration API)

```bash
kubectl apply -f schedulejob-service.yaml
```


### Minimum Resource Requirements

#### Storage sizing

- Suggestion resource for 600k entities:
    - NATS: 31GB storage
    - TransformMsg DB (including transform_message and rtus_api tables): 1.3GB

#### TransformMsg module
- TransformMsg do a hard work, so we need to give it more resources to handle the workload.
- We can set the resource request and limit to the TransformMsg container
- For example: with total 600k entities, we can set the resource request as follows:
    -   Request:
        -   CPU: 0.5
        -   Memory: 512MB

#### ScheduleJob module
- Suggestion:
    -   Request:
        -   CPU: 0.25
        -   Memory: 128MB

#### Timekeeper module
- Suggestion:
    -   Request:
        -   CPU: 0.1
        -   Memory: 32MB
