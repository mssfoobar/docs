---
sidebar_position: 1
---
import IdealImage from "@theme/IdealImage";
import architecture from "@site/static/img/modules/sds/deployment.png";

# Deployment

## Architecture

<div>
    <div style={{ marginBottom: "2rem", maxWidth: "700px" }}>
        <IdealImage img={architecture} />
    </div>
</div>

The Session Data Store has the following service dependencies:
- **Valkey**
    - Required by SDS for storing key-value data
- **IAMS (Keycloak + AAS)**
    - Required by SDS for authenticated session data storage

## Keycloak Client Configuration

SDS requires a Keycloak Client with the necessary service account roles to access the Keycloak admin API. Follow the
below steps to create a required Keycloak Client.

1. Login to Keycloak Admin Console and switch the realm. This example demonstrates using AOH realm.

![Select Default Realm](/img/modules/sds/select_realm.png)

2. Click on `Clients` in the side menu and click on `Create client` button.

![Create Client](/img/modules/sds/create_client.png)

3. Go through the steps below to create a new client.

-   Fill up the required fields (you can enter your own value here)
![Create Client Step 1](/img/modules/sds/create_client_step1.png)
-   Set capabilities settings
![Create Client Step 2](/img/modules/sds/create_client_step2.png)
-   Leave the fields below empty and click on `Save`.
![Create Client Step 3](/img/modules/sds/create_client_step3.png)

4. Click on `Service accounts roles` tab and click on `Client roles`.

![Client_Role](/img/modules/sds/client_role.png)

5. Find and assign the required roles to the client as shown in the below image.

![Keycloak_roles](/img/modules/sds/keycloak_configuration.png)

6. Go to the `Credentials` tab in the client details page to find the `KEYCLOAK_CLIENTSCRET` for server
[configuration](../configuration/configuration.mdx#keycloak_clientid).

![Client Secret](/img/modules/sds/client_secret.png)

## Infrastructure as Code Sample Deployments

Please refer to our [sample SDS deployment](https://github.com/mssfoobar/IaC/tree/main/sample-Aoh-Deployment/aoh/manifests/sds)
infrastructure code for implementation examples.